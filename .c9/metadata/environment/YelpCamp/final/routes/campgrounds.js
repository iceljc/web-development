{"filter":false,"title":"campgrounds.js","tooltip":"/YelpCamp/final/routes/campgrounds.js","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":3,"column":89},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":41},"action":"insert","lines":["var Review = require(\"../models/review\");"],"id":3}],[{"start":{"row":4,"column":41},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":5,"column":0},"end":{"row":5,"column":43},"action":"insert","lines":["var Comment = require(\"../models/comment\");"],"id":5}],[{"start":{"row":47,"column":0},"end":{"row":61,"column":3},"action":"remove","lines":["// SHOW - shows more info about one campground","router.get(\"/:id\", function(req, res){","    //find the campground with provided ID","    Campground.findById(req.params.id).populate(\"comments\").exec(function(err, foundCampground){","        if(err){","            req.flash(\"error\", \"Campground not found.\");","            return res.redirect(\"back\");","            // console.log(err);","        } else {","            // console.log(foundCampground)","            //render show template with that campground","            res.render(\"campgrounds/show\", {campground: foundCampground});","        }","    });","});"],"id":7},{"start":{"row":47,"column":0},"end":{"row":61,"column":3},"action":"insert","lines":["// SHOW - shows more info about one campground","router.get(\"/:id\", function (req, res) {","    //find the campground with provided ID","    Campground.findById(req.params.id).populate(\"comments\").populate({","        path: \"reviews\",","        options: {sort: {createdAt: -1}}","    }).exec(function (err, foundCampground) {","        if (err) {","            console.log(err);","        } else {","            //render show template with that campground","            res.render(\"campgrounds/show\", {campground: foundCampground});","        }","    });","});"]}],[{"start":{"row":90,"column":0},"end":{"row":101,"column":0},"action":"remove","lines":["// DESTROY CAMPGROUND ROUTE","router.delete(\"/:id\", middleware.checkCampgroundOwnership, function(req, res){","   Campground.findByIdAndRemove(req.params.id, function(err){","      if(err){","          req.flash(\"error\", \"Campground not found.\");","          return res.redirect(\"/campgrounds\");","      } else {","          res.redirect(\"/campgrounds\");","      }","   });","});",""],"id":8},{"start":{"row":90,"column":0},"end":{"row":116,"column":3},"action":"insert","lines":["// DESTROY CAMPGROUND ROUTE","router.delete(\"/:id\", middleware.checkCampgroundOwnership, function (req, res) {","    Campground.findById(req.params.id, function (err, campground) {","        if (err) {","            res.redirect(\"/campgrounds\");","        } else {","            // deletes all comments associated with the campground","            Comment.remove({\"_id\": {$in: campground.comments}}, function (err) {","                if (err) {","                    console.log(err);","                    return res.redirect(\"/campgrounds\");","                }","                // deletes all reviews associated with the campground","                Review.remove({\"_id\": {$in: campground.reviews}}, function (err) {","                    if (err) {","                        console.log(err);","                        return res.redirect(\"/campgrounds\");","                    }","                    //  delete the campground","                    campground.remove();","                    req.flash(\"success\", \"Campground deleted successfully!\");","                    res.redirect(\"/campgrounds\");","                });","            });","        }","    });","});"]}]]},"ace":{"folds":[],"scrolltop":1432,"scrollleft":0,"selection":{"start":{"row":116,"column":3},"end":{"row":116,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1558399663644,"hash":"c26885f9aa8b19db30e26244dfd50ba9f5f8ed33"}